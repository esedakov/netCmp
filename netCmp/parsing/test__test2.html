<html>
	<head>
		<link rel="stylesheet" type="text/css" href="../external/joint.css">
		<script src="../external/jquery.min.js"></script>
		<script src="../external/lodash.min.js"></script>
		<script src="../external/backbone-min.js"></script>
		<script src="../external/joint.js"></script>
	</head>
	<body>
		<!-- according to example on http://www.jointjs.com/tutorial, create
			global container for joint to draw elements inside -->
		<div id="myholder"></div>
		<!-- remaining code goes in JS -->
		<script type="text/javascript">
			var glWidth = 600, glHeight = 600;
			var graph = new joint.dia.Graph;

			var paper = new joint.dia.Paper({
				el: $('#myholder'),
				width: glWidth,
				height: glHeight,
				model: graph,
				gridSize: 1
			});
			var rect = new joint.shapes.basic.Rect({
				position: { x: 100, y: 30 },
				size: { width: 100, height: 30 },
				attrs: { rect: { fill: 'blue' }, text: { text: 'my box', fill: 'white' } }
			});
			/*

				//assign default viewing styles for rectangle
				styles.rectview = {
					fill: "#13579b",
					rx: 15,
					ry: 15,
					'stroke-width': 2,
					stroke: 'black',
					opacity: 0.75
				};*/


    /*rect.attr({
        rect: { fill: '#E74C3C', rx: 20, ry: 20, 'stroke-width': 0 },
        text: {
            text: 'my label', fill: '#ECF0F1',
            'font-size': 11, 'font-weight': 'normal', 'font-variant': 'small-caps', 'text-transform': 'capitalize'
        }
    });*/
			graph.addCells([rect]);//, link]);
			drawRect({rectview: {opacity: 0.75}}, graph);

			function drawRect(styles, g){
				//check if position is not defined in attributes
				if( !("pos" in styles) ){
					//define position
					styles.pos = {};
				}
				//if 'x' is not defined inside position
				if( !('x' in styles.pos) ){
					//generate x-position randomly
					styles.pos.x = Math.random() * glWidth;
				}
				//if 'x' is not defined inside position
				if( !('y' in styles.pos) ){
					//generate y-position randomly
					styles.pos.x = Math.random() * glWidth;
				}
				//check if dimensions is not defined in attributes
				if( !("dim" in styles) ){
					//define dimensions
					styles.dim = {};
				}
				//if 'height' is not defined inside dimensions
				if( !('height' in styles.dim) ){
					//assign default height
					styles.dim.height = 100;
				}
				//if 'x' is not defined inside dimensions
				if( !('width' in styles.dim) ){
					//assign default width
					styles.dim.width = 150;
				}
				//check if rect view is not defined in attributes
				if( !("rectview" in styles) ){
					//define rectangle view
					styles.rectview = {};
				}
				//if 'fill' (background color) is not defined in view
				if( !('fill' in styles.rectview) ){
					//assign default background color
					styles.rectview.fill = "#aa0023";
				}
				//if text view is not defined in attributes
				if( !("textview" in styles) ){
					//define text struct
					styles.textview = {};
				}
				//if 'text' is not defined in textual view
				if( !('text' in styles.textview) ){
					//assign default text inside rectangle
					styles.textview.text = "unknown label";
				}
				//if font color ('fill') is not defined in textual view
				if( !('fill' in styles.textview) ){
					//assign text font color
					styles.textview.fill = "#eeeeee";
				}
				//if font size is not defined in textual view
				if( !('font-size' in styles.textview) ){
					//assign default font size
					styles.textview['font-size'] = 18;
				}
				//create rect
				var rect = new joint.shapes.basic.Rect({
					position: styles.pos,
					size: styles.dim,
					attrs: { 
						rect: styles.rectview, 
						text: styles.textview 
					}
				});
				//add rect to graph
				g.addCells([rect]);
			}

		</script>
	</body>
</html>